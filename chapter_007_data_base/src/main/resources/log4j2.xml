<?xml version="1.0" encoding="UTF-8"?>
<!-- указываем, что логгер будет обрабатывать все исключения с уровень WARN и выше. -->
<!--                                  поломка приложения -->
<!-- trace -> debug -> info -> warn   -> error           -->
<Configuration status="trace">

    <!-- куда выводим информацию  -->
    <!-- В данном примере мы сообщения выводим в КОНСОЛЬ -->
    <Appenders>
        <!--        первый аппендер - пишет в консоль -->
        <Console name="Console" target="SYSTEM_OUT">

            <!--
            %d{yyyy-MM-dd HH:mm:ss} – выводит дату в формате 2014-01-14 23:55:57
            %-5level – выводит уровень лога (ERROR, DEBUG, INFO …), цифра 5 означает что всегда использовать 5 символов
                   остальное дополнится пробелами, а минус (-), то что позиционирование по левой стороне.
            %p - см выше
            %c{1} – категория, в скобках указывается сколько уровней выдавать.
                    1 - имя класса, 2 - имя класса + пакета
            %L () или %logger{36} – номер строки в которой произошёл вызов записи в лог.
            %m или %msg – сообщение, которое передали в лог.
            %t - имя потока
            %n – переход на новую строку
             -->
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg %n"/>
        </Console>

        <!-- второй аппендер пишет в файл -->
        <!--     filePattern  зачем???? без него не работает  -->
        <!--     filePattern="c:/logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz"-->

        <RollingFile name="rollingFile"
                     fileName="c:/logs/log4j2.log"
                     filePattern="c:/logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz"
        >
            <!-- формат вывода в файл -->
            <PatternLayout pattern="%d %p [%t] %m %n"/>
            <Policies>
                <!-- каждый день создаёт новый файл-->
                <TimeBasedTriggeringPolicy interval="1"/>
                <!-- максимальный размер файла 250 мб -->
                <SizeBasedTriggeringPolicy size="250 MB"/>
            </Policies>
        </RollingFile>
    </Appenders>

    <!-- точка, ОТКУДА уходят сообщения в коде -->
    <!-- указывает уровни логера для конкретных пакетов  -->
    <Loggers>
        <!--        уровень для файлов в папке jdbc -->
        <Logger name="jdbc" level="trace" additivity="false">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="rollingFile"/>
        </Logger>

        <!--        уровень по умолчанию -->
        <Root level="error">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="rollingFile"/>
        </Root>
    </Loggers>
</Configuration>